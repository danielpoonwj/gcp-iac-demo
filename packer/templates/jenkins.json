{
  "builders": [
    {
      "type": "vagrant",
      "communicator": "ssh",
      "source_path": "ubuntu/xenial64",
      "output_dir": "../vagrant/jenkins/tmp",
      "skip_add": true
    }
  ],
  "provisioners": [
    {
      "type": "file",
      "source": "../../.ansible-vault-pass",
      "destination": "/tmp/.ansible-vault-pass"
    },
    {
      "type": "shell",
      "script": "../scripts/ansible-bootstrap.sh"
    },
    {
      "type": "ansible-local",
      "extra_arguments": [
        "--vault-password-file=/tmp/.ansible-vault-pass"
      ],
      "command": "sudo ansible-playbook",
      "playbook_dir": "../../ansible/",
      "playbook_file": "../../ansible/jenkins-init.yml",
      "galaxycommand": "sudo ansible-galaxy",
      "galaxy_file": "../ansible-galaxy-requirements/jenkins.yml"
    }
  ]
}
